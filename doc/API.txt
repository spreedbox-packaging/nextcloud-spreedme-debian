
                    Spreed.ME Nextcloud API v1.0.0
            ===============================================
                        (c)2016 struktur AG

The Spreed.ME Nextcloud app provides an (currently not RESTful) API endpoint.
REST is not fulfilled, as Nextcloud core currently doesn't support it.
This API currently is marked "private" in the sense that we can change it at
any point of time and it's solely your task to watch for changes.

The REST API should always return valid JSON data. This includes the non 200
status responses. If non-JSON is received it is an error not generated by the
API or there was a problem while JSON encoding.

Some endpoints of this API require a valid Nextcloud session. To get this session
it is sufficient to POST user credentials to the Nextcloud login endpoint.
The server (Nextcloud) then sets a cookie which can be used for authentication.
This session (cookie) should always be sent if available.


Available endpoints with request methods and content-type:

  /api/v1/config

    The config endpoint returns both spreed-webrtc and Nextcloud configuration.
    This endpoint does not require a session (cookie). It's public.

    GET application/x-www-form-urlencoded
      No parameters.
      Response 200:
        {
          "success": true,
          "spreed_webrtc": {
            "url": "https://pferdeapfel.intranet.struktur.de:9999/webrtc/"
          }
        }


  /api/v1/user/config

    The user/config endpoint returns user-specific information about the
    currently authenticated user.
    This endpoint requires a valid session (cookie).

    GET application/x-www-form-urlencoded
      No parameters.
      Response 200:
        {
          "success": true,
          "id": "admin",
          "display_name": "Administrator",
          "is_admin": true,
          "is_spreedme_admin": true
        }


  /api/v1/user/token

    The user/token endpoint returns the token required to
    authenticate to spreed-webrtc.
    This endpoint requires a valid session (cookie).

    GET application/x-www-form-urlencoded
      No parameters.
      Response 200:
        {
          "success": true,
          "useridcombo": "1449147545:admin",
          "secret": "Cd2ma2yhMD/cZCH4M2bURGjhQV0+SEP43PJMmIkv4+w="
        }


  /api/v1/token/withtp

    The token/withtp endpoint returns a token which can be used by non-Nextcloud users
    to authenticate to spreed-webrtc. It requires a temporary password.
    This endpoint does not require a session (cookie). It's public.

    POST application/x-www-form-urlencoded
      tp: The temporary password
      Response 200:
        {
          "success": true,
          "useridcombo": "1450885700:test",
          "secret": "0QaHuJ3WuSf6ONErhZvJO8H9Lxu0uaEbGSnmxQh/T1A="
        }


  /api/v1/admin/tp

    The admin/tp endpoint returns a temporary password.
    This endpoint requires a valid admin session (cookie).

    POST application/x-www-form-urlencoded
      userid: The user id to invite
      expiration: UNIX timestamp representation of expiration date
      Response 200:
        {
          "success": true,
          "tp": "1450885680:test:THFJ2rJbkEhGR5ehkI+JqoZNXjMzuApSKjLXGsX7HAc="
        }


  /api/v1/file/download

    The file/download endpoint provides download functionality
    of Nextcloud documents. Currently it redirects to a URL where the file
    ultimately can be found. This is due to Nextcloud's restrictiveness.
    This endpoint and the URL it redirects to both require a valid session (cookie).

    GET application/x-www-form-urlencoded
      file: The full path to the file to download (string)
      Response 200: Redirect to the requested file which can then be downloaded.




End of API.

For questions, contact mailto:info@struktur.de.


(c)2016 struktur AG
